# PIVOTING

### Chisel

#### Reverse

_client:_

```bash
chisel client <ip-server>:<port-server> R:0.0.0.0:3001:socks
```

_server:_

```bash
chisel server -p <port-server> --reverse
```

#### Forward

```bash
chisel server -p <your-port> --reverse
```

inermediate host

```bash
chisel client <your-ip>:<your-port> <inter-ip>:<inter-port>:<your-ip>:<your-port>
```

destination host

```bash
./chisel client <inter-ip>:<inter-port> R:14999:socks
```

\


### Tun2socks

_Create interface:_

```bash
$ sudo ip tuntap add mode tun dev t2s
$ sudo ip a add 10.0.0.0/8 dev t2s # target network (behind socks host)
$ sudo ip l set up dev t2s
```

_Start `tun2socks`:_

```bash
$ sudo tun2socks -proxy socks5://127.0.0.1:1080 -device tun://t2s
```

_Redact dns for interface (`systemd-resolved`):_

```bash
$ sudo resolvectl dns l 10.1.2.1 10.1.3.1 # dns servers
$ sudo resolvectl mdns l yes # allow TCP
$ sudo resolvectl domain l test.com # resolve domain, same as search
```

_Check configure:_

```bash
$ resolvectl status
...
Link 3 (t2s)
    Current Scopes: DNS LLMNR/IPv4 LLMNR/IPv6 mDNS/IPv4 mDNS/IPv6
         Protocols: +DefaultRoute +LLMNR +mDNS -DNSOverTLS DNSSEC=no/unsupported
Current DNS Server: 10.1.2.1
       DNS Servers: 10.1.3.1
        DNS Domain: test.com
...
```

### GOST

_Forward traffic from local 2222 port to external address with port 80_

```
gost -L=tcp://0.0.0.0:2222/10.10.16.140:80
```

### rdp2tcp

{% embed url="https://habr.com/ru/articles/796973/" %}

